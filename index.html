<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Starexx Video Player</title>
    <meta name="title" content="Starexx Simple Video Player v1.1 Smooth & Minimal Playback">
    <meta name="description" content="Starexx VPL is a clean, fast, and minimal video player designed for smooth playback without distractions. Enjoy a focused viewing experience with full control.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://raw.githubusercontent.com/starexxx/vpl/d74ad0b47f1dc6f102f07c908d288d0f6d4276f8/logo.jpg">
    <meta property="og:title" content="VPL">
    <meta property="og:description" content="A modern, no-nonsense video player built for seamless playback. Lightweight, clean, and distraction-free.">
    <meta property="og:image" content="https://raw.githubusercontent.com/starexxx/vpl/d74ad0b47f1dc6f102f07c908d288d0f6d4276f8/logo.jpg">
    <meta name="twitter:title" content="Starexx Video Player">
    <meta name="twitter:description" content="Smooth, minimal, and efficient. Starexx Video Player offers a focused experience without any clutter or ads.">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/starexxx/vpl/d74ad0b47f1dc6f102f07c908d288d0f6d4276f8/logo.jpg">
    <meta name="keywords" content="Starexx, Starexx Video Player, Simple Video Player, Minimal Video Player, Clean UI Player, Lightweight Media Player, Smooth Video App, Video Player API, Video Player UI, Link to Video, Link to video player, Android Video Player">
    <meta name="author" content="Starexx">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000000">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
        
        :root {
            --primary-color: #ff3d3d;
            --secondary-color: rgba(255, 255, 255, 0.9);
            --bg-color: #000;
            --control-bg: rgba(0, 0, 0, 0.7);
            --slider-bg: rgba(255, 255, 255, 0.2);
            --alert-bg: #1e1e1e;
            --alert-header: #ff3d3d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: var(--bg-color);
            color: #fff;
            height: 100vh;
            overflow: hidden;
            touch-action: none;
            overscroll-behavior: contain;
        }
        
        .player-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        
        .video-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: none;
        }
        
        video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.2s ease, filter 0.2s ease;
        }
        
        .thumbnail-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }
        
        .play-center-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #121212;
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            color: var(--secondary-color);
            font-size: 30px;
            cursor: pointer;
            opacity: 0;
            z-index: 3;
            margin: 0;
            padding: 0;
        }
        
        .play-center-btn.visible {
            opacity: 1;
        }
        
        .controls-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 5;
        }
        
        .controls-container.visible {
            opacity: 1;
            pointer-events: all;
        }
        
        .progress-time {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .progress-container {
            flex-grow: 1;
            height: 4px;
            background: var(--slider-bg);
            border-radius: 2px;
            cursor: pointer;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            border-radius: 2px;
            transition: width 0.1s;
        }
        
        .time-display {
            font-size: 13px;
            font-weight: 500;
            min-width: 100px;
            text-align: center;
            color: var(--secondary-color);
        }
        
        .main-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .seek-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .right-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: var(--secondary-color);
            font-size: 22px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.9;
            transition: all 0.2s;
            border-radius: 50%;
        }
        
        .control-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .seek-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--control-bg);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            backdrop-filter: blur(5px);
            z-index: 6;
        }
        
        .seek-indicator.show {
            opacity: 1;
        }
        
        .orientation-prompt {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            z-index: 10;
            text-align: center;
            padding: 0 20px;
            backdrop-filter: blur(50px);
        }
        
        .orientation-text {
            font-size: 15px;
            max-width: 300px;
            line-height: 1.2;
        }
        
        .rotate-icon {
            font-size: 50px;
            animation: pulse 2s infinite;
            color: white;
        }
               
        .settings-panel {
            position: absolute;
            top: 0;
            right: 0;
            width: 85%;
            max-width: 320px;
            height: 100%;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(15px);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 15;
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            overflow-y: auto;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
        }
        
        .settings-panel.show {
            transform: translateX(0);
        }
        
        .settings-header {
            font-size: 16px;
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .settings-header i {
            font-size: 14px;
            opacity: 0.7;
        }
        
        .slider-container {
            width: 100%;
            margin: 15px 0;
        }
        
        .slider-label {
            display: flex;
            color: #aaa;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: var(--slider-bg);
            border-radius: 5px;
            outline: white;
        }
        
        .slider::-webkit-slider-thumb {
            width: 16px;
            height: 16px;
            -webkit-appearance: none;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        .settings-btn {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            display: flex;
            margin-top: 5px;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--secondary-color);
            font-size: 14px;
        }
        
        .settings-btn:hover {
            transform: translateX(3px);
        }
        
        .settings-btn i {
            opacity: 0.7;
            font-size: 12px;
        }
        
        .pinch-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }
        
        .zoom-level {
            position: absolute;
            bottom: 80px;
            right: 15px;
            background: var(--control-bg);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .zoom-level.show {
            opacity: 1;
        }
        
        .custom-alert {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            backdrop-filter: blur(25px);
        }
        
        .custom-alert.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .alert-box {
            background: rgba(55,55,55,0.2);
            border-radius: 12px;
            width: 90%;
            max-width: 380px;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .custom-alert.show .alert-box {
            transform: scale(1);
        }
        
        .alert-header {
            padding: 18px;
            background: transparent;
            color: white;
            font-weight: 600;
            text-align: center;
            font-size: 17px;
            display: flex;
            align-items: left;
            justify-content: left;
            gap: 8px;
        }
        
        .alert-content {
            padding: 25px 20px;
            text-align: left;
            line-height: 1.5;
            font-size: 15px;
            color: #ddd;
            white-space: pre-line;
        }
        
        .alert-actions {
            display: flex;
            border-top: 1px solid #333;
        }
        
        .alert-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: rgba(255,255,255,0.4);
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 15px;
        }
        
        .alert-btn:not(:last-child) {
            border-right: 1px solid #333;
        }
        
        .alert-btn:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .alert-btn.primary {
            color: white;
            font-weight: 600;
        }
        
        iframe {
            display: none !important;
            visibility: hidden !important;
        }
        
        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
            z-index: 4;
        }
        
        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="player-container">
        <div class="video-wrapper">
            <div class="thumbnail-overlay" id="thumbnailOverlay"></div>
            <div class="loading-spinner" id="loadingSpinner"></div>
           
            <button class="play-center-btn" id="playCenterBtn">
                <i class="fas fa-play"></i>
            </button>
            
            <video id="videoPlayer" playsinline webkit-playsinline></video>
            
            <div class="controls-container" id="controlsContainer">
                <div class="progress-time">
                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
                </div>
                <div class="main-controls">
                    <div class="seek-controls">
                        <button class="control-btn" id="backBtn" aria-label="Rewind 10 seconds">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button class="control-btn" id="playPauseBtn" aria-label="Play/Pause">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="control-btn" id="forwardBtn" aria-label="Forward 10 seconds">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                    <div class="right-controls">
                        <button class="control-btn" id="muteBtn" aria-label="Mute/Unmute">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button class="control-btn" id="settingsBtn" aria-label="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="control-btn" id="fullscreenBtn" aria-label="Fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="seek-indicator" id="seekIndicator">+10s</div>
            <div class="pinch-overlay" id="pinchOverlay"></div>
            <div class="zoom-level" id="zoomLevel">100%</div>
            <div class="settings-panel" id="settingsPanel">
                <div class="settings-section">
                    <div class="settings-header">
                        <i class="fas fa-sliders-h"></i>
                        <span>Playback Settings</span>
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Volume</span>
                            <span id="volumeValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="volumeSlider" min="0" max="1" step="0.01" value="1">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Brightness</span>
                            <span id="brightnessValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="brightnessSlider" min="0.1" max="1" step="0.05" value="1">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Playback Speed</span>
                            <span id="speedValue">1x</span>
                        </div>
                        <input type="range" class="slider" id="speedSlider" min="0.5" max="2" step="0.25" value="1">
                    </div>
                </div>
                <div class="settings-section">
                    <div class="settings-header">
                        <i class="fas fa-info-circle"></i>
                        <span>Information</span>
                    </div>
                    <div class="settings-btn" id="videoInfoBtn">
                        <span>Video Details</span>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="settings-btn" id="aboutBtn">
                        <span>About Player</span>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
            <div class="orientation-prompt" id="orientationPrompt">
                <i class="fas fa-undo rotate-icon"></i>
                <div class="orientation-text">Please rotate your device to landscape mode for the best viewing experience</div>
            </div>
        </div>
    </div>
    <div class="custom-alert" id="customAlert">
        <div class="alert-box">
            <div class="alert-header" id="alertHeader">
                <span>Sample</span>
            </div>
            <div class="alert-content" id="alertContent">Sample</div>
            <div class="alert-actions">
                <button class="alert-btn" id="alertCancelBtn">Cancel</button>
                <button class="alert-btn primary" id="alertOkBtn">OK</button>
            </div>
        </div>
    </div>
    
    <script>
        /**
         * Video Player v1.2
         * A modern, responsive video player with no ads, no clutter and fast
         * 
         * Copyright (c) 2025 Ankite Mehta (Starexx)
         *
         * Licensed under the Apache License, Version 2.0 (the "License");
         * you may not use this file except in compliance with the License.
         * You may obtain a copy of the License at
         *      
         * http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing, software
         * distributed under the License is distributed on an "AS IS" BASIS,
         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         * See the License for the specific language governing permissions and
         * limitations under the License.
         */
        
        if (window.top !== window.self) {
            window.top.location = window.self.location;
        }

        // Class
        class VideoPlayer {
            constructor() {
                this.videoPlayer = document.getElementById('videoPlayer');
                this.controlsContainer = document.getElementById('controlsContainer');
                this.playPauseBtn = document.getElementById('playPauseBtn');
                this.muteBtn = document.getElementById('muteBtn');
                this.settingsBtn = document.getElementById('settingsBtn');
                this.fullscreenBtn = document.getElementById('fullscreenBtn');
                this.timeDisplay = document.getElementById('timeDisplay');
                this.progressContainer = document.getElementById('progressContainer');
                this.progressBar = document.getElementById('progressBar');
                this.backBtn = document.getElementById('backBtn');
                this.forwardBtn = document.getElementById('forwardBtn');
                this.seekIndicator = document.getElementById('seekIndicator');
                this.settingsPanel = document.getElementById('settingsPanel');
                this.orientationPrompt = document.getElementById('orientationPrompt');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.volumeValue = document.getElementById('volumeValue');
                this.brightnessSlider = document.getElementById('brightnessSlider');
                this.brightnessValue = document.getElementById('brightnessValue');
                this.speedSlider = document.getElementById('speedSlider');
                this.speedValue = document.getElementById('speedValue');
                this.videoInfoBtn = document.getElementById('videoInfoBtn');
                this.aboutBtn = document.getElementById('aboutBtn');
                this.pinchOverlay = document.getElementById('pinchOverlay');
                this.zoomLevel = document.getElementById('zoomLevel');
                this.customAlert = document.getElementById('customAlert');
                this.alertHeader = document.getElementById('alertHeader');
                this.alertContent = document.getElementById('alertContent');
                this.alertOkBtn = document.getElementById('alertOkBtn');
                this.alertCancelBtn = document.getElementById('alertCancelBtn');
                this.playCenterBtn = document.getElementById('playCenterBtn');
                this.thumbnailOverlay = document.getElementById('thumbnailOverlay');
                this.loadingSpinner = document.getElementById('loadingSpinner');
                
                this.controlsTimeout = null;
                this.isLandscape = window.innerWidth > window.innerHeight;
                this.initialDistance = null;
                this.currentZoom = 1;
                this.lastTouchTime = 0;
                this.videoLoaded = false;
                this.autoplayAttempted = false;
                
                this.initPlayer();
                this.registerServiceWorker();
            }
            
            /**
             * Initialize the video player with all event listeners
             */
            initPlayer() {
                // GET video URL from query parameter or use default
                const urlParams = new URLSearchParams(window.location.search);
                const videoUrl = urlParams.get('q') || 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4'; // Default Video "/"
                

                if (this.checkVideoUrl(videoUrl)) {
                    this.videoPlayer.src = videoUrl;
                    

                    this.setVideoThumbnail(videoUrl);
                }
                

                this.addEventListeners();
                
                this.checkOrientation();
            }
            
            /**
             * Set video thumbnail if possible
             * @param {string} videoUrl - The video URL
             */
            setVideoThumbnail(videoUrl) {
                if (videoUrl.includes('youtube.com') || videoUrl.includes('youtu.be')) {
                    const videoId = this.extractYouTubeId(videoUrl);
                    if (videoId) {
                        this.thumbnailOverlay.style.backgroundImage = `url(https://img.youtube.com/vi/${videoId}/maxresdefault.jpg)`;
                    }
                } else {
                    this.thumbnailOverlay.style.background = '#000';
                }
            }
            
            /**
             * Extract YouTube video ID from URL
             * @param {string} url - YouTube URL
             * @returns {string|null} - Video ID or null
             */
            extractYouTubeId(url) {
                const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
                const match = url.match(regExp);
                return (match && match[2].length === 11) ? match[2] : null;
            }
            
            /**
             * Register Service Worker for PWA functionality
             */
            registerServiceWorker() {
                if ('serviceWorker' in navigator) {
                    window.addEventListener('load', () => {
                        navigator.serviceWorker.register('/sw.js').then(registration => {
                            console.log('ServiceWorker registration successful');
                        }).catch(err => {
                            console.log('ServiceWorker registration failed: ', err);
                        });
                    });
                }
            }
            
            /**
             * Add all event listeners to the player
             */
            addEventListeners() {
                // Controls
                this.playPauseBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.togglePlayPause();
                });
                
                this.playCenterBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.togglePlayPause();
                    this.hideCenterPlayButton();
                });
                
                this.fullscreenBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleFullscreen();
                    this.showControls();
                });
                
                this.muteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleMute();
                    this.showControls();
                });
                
                this.backBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.seek(-10);
                    this.showControls();
                });
                
                this.forwardBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.seek(10);
                    this.showControls();
                });
                
                this.progressContainer.addEventListener('click', (e) => {
                    const rect = this.progressContainer.getBoundingClientRect();
                    const pos = (e.clientX - rect.left) / rect.width;
                    this.videoPlayer.currentTime = pos * this.videoPlayer.duration;
                    this.showControls();
                });
                
                this.settingsBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleSettings();
                });
                
                this.videoPlayer.addEventListener('click', (e) => {
                    const now = Date.now();
                    if (now - this.lastTouchTime < 300) { // Double tap
                        if (this.currentZoom > 1) {
                            this.updateZoom(1);
                        } else {
                            this.updateZoom(1.5);
                        }
                    }
                    this.lastTouchTime = now;
                    
                    if (this.settingsPanel.classList.contains('show')) {
                        this.hideSettings();
                        return;
                    }
                    
                    this.toggleControls();
                });
                
                this.videoPlayer.addEventListener('touchstart', (e) => {
                    if (e.touches.length === 2) {
                        this.handlePinch(e);
                    }
                }, { passive: false });
                
                this.videoPlayer.addEventListener('touchmove', (e) => {
                    if (e.touches.length === 2) {
                        this.handlePinch(e);
                    }
                }, { passive: false });
                
                this.videoPlayer.addEventListener('touchend', () => {
                    this.resetPinch();
                });
                
                this.videoPlayer.addEventListener('timeupdate', () => {
                    this.updateTimeDisplay();
                });
                
                this.videoPlayer.addEventListener('play', () => {
                    this.playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    this.hideCenterPlayButton();
                    this.hideThumbnail();
                });
                
                this.videoPlayer.addEventListener('pause', () => {
                    this.playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                });
                
                this.videoPlayer.addEventListener('waiting', () => {
                    this.showLoadingSpinner();
                });
                
                this.videoPlayer.addEventListener('playing', () => {
                    this.hideLoadingSpinner();
                });
                
                this.videoPlayer.addEventListener('loadedmetadata', () => {
                    this.videoLoaded = true;
                    this.hideLoadingSpinner();
                    
                    
                    if (this.isLandscape && !this.autoplayAttempted) {
                        this.autoplayAttempted = true;
                        this.videoPlayer.play().then(() => {
                            this.hideCenterPlayButton();
                        }).catch(e => {
                            this.showCenterPlayButton();
                            console.log("Autoplay blocked:", e);
                        });
                    }
                });
                
                this.videoPlayer.addEventListener('error', () => {
                    this.showAlert("Playback Error", "Failed to load the video. Please check the URL.");
                    this.hideLoadingSpinner();
                });
                
                
                this.volumeSlider.addEventListener('input', () => {
                    this.videoPlayer.volume = this.volumeSlider.value;
                    this.volumeValue.textContent = `${Math.round(this.volumeSlider.value * 100)}%`;
                    this.videoPlayer.muted = (this.volumeSlider.value == 0);
                    this.updateMuteButton();
                });
                
                this.brightnessSlider.addEventListener('input', () => {
                    this.videoPlayer.style.filter = `brightness(${this.brightnessSlider.value})`;
                    this.brightnessValue.textContent = `${Math.round(this.brightnessSlider.value * 100)}%`;
                });
                
                this.speedSlider.addEventListener('input', () => {
                    this.videoPlayer.playbackRate = this.speedSlider.value;
                    this.speedValue.textContent = `${this.speedSlider.value}x`;
                });
                
                this.videoInfoBtn.addEventListener('click', () => {
                    this.hideSettings();
                    setTimeout(() => {
                        this.showAlert("Video Details", `Video Quality: Default\nResolution: ${this.videoPlayer.videoWidth}x${this.videoPlayer.videoHeight}\nDuration: ${this.formatTime(this.videoPlayer.duration)}`);
                    }, 300);
                });
                
                this.aboutBtn.addEventListener('click', () => {
                    this.hideSettings();
                    setTimeout(() => {
                        this.showAlert("About Player", "VPL by Ankit Mehta\nA video player with smooth viewing experience. no distractions, pure playback.");
                    }, 300);
                });
                
                this.alertOkBtn.addEventListener('click', () => {
                    this.hideAlert();
                });
                
                this.alertCancelBtn.addEventListener('click', () => {
                    this.hideAlert();
                });
                
                window.addEventListener('resize', () => {
                    this.checkOrientation();
                });
                
                window.addEventListener('orientationchange', () => {
                    this.checkOrientation();
                });
                
                document.addEventListener('click', (e) => {
                    if (!this.settingsPanel.contains(e.target) && e.target !== this.settingsBtn) {
                        this.hideSettings();
                    }
                });
                

                window.addEventListener('DOMContentLoaded', () => {
                    if (window.self !== window.top) {
                        document.body.innerHTML = '';
                        document.write('This page cannot be embedded');
                    }
                });
                

                document.addEventListener('DOMContentLoaded', () => {
                    setTimeout(() => {
                        if (!document.fullscreenElement && this.isLandscape) {
                            document.documentElement.requestFullscreen().catch(e => {
                                console.log("Fullscreen error:", e);
                            });
                        }
                    }, 500);
                });
            }
            
            /**
             * Check device orientation and adjust UI accordingly
             */
            checkOrientation() {
                this.isLandscape = window.innerWidth > window.innerHeight;
                if (this.isLandscape) {
                    this.orientationPrompt.style.display = 'none';
                    if (!this.videoPlayer.paused) this.showControls();
                    
                    if (this.videoPlayer.paused && this.videoPlayer.readyState > 2 && !this.autoplayAttempted) {
                        this.autoplayAttempted = true;
                        this.videoPlayer.play().then(() => {
                            this.hideCenterPlayButton();
                        }).catch(e => {
                            this.showCenterPlayButton();
                            console.log("Autoplay blocked:", e);
                        });
                    }
                    
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen().catch(e => {
                            console.log("Fullscreen error:", e);
                        });
                    }
                } else {
                    this.orientationPrompt.style.display = 'flex';
                    this.videoPlayer.pause();
                    this.playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                    this.hideControls();
                    this.hideSettings();
                }
            }
            
            /**
             * Show video controls
             */
            showControls() {
                if (!this.isLandscape) return;
                this.controlsContainer.classList.add('visible');
                clearTimeout(this.controlsTimeout);
                this.controlsTimeout = setTimeout(() => this.hideControls(), 3000);
            }
            
            /**
             * Hide video controls
             */
            hideControls() {
                this.controlsContainer.classList.remove('visible');
            }
            
            /**
             * Toggle video controls visibility
             */
            toggleControls() {
                if (this.controlsContainer.classList.contains('visible')) {
                    this.hideControls();
                } else {
                    this.showControls();
                }
            }
            
            /**
             * Show settings panel
             */
            showSettings() {
                this.settingsPanel.classList.add('show');
                this.hideControls();
            }
            
            /**
             * Hide settings panel
             */
            hideSettings() {
                this.settingsPanel.classList.remove('show');
            }
            
            /**
             * Toggle settings panel visibility
             */
            toggleSettings() {
                if (this.settingsPanel.classList.contains('show')) {
                    this.hideSettings();
                } else {
                    this.showSettings();
                }
            }
            
            /**
             * Format time in MM:SS format
             * @param {number} seconds - Time in seconds
             * @returns {string} - Formatted time string
             */
            formatTime(seconds) {
                if (isNaN(seconds)) return '00:00';
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            
            /**
             * Update time display and progress bar
             */
            updateTimeDisplay() {
                this.timeDisplay.textContent = `${this.formatTime(this.videoPlayer.currentTime)} / ${this.formatTime(this.videoPlayer.duration)}`;
                this.progressBar.style.width = `${(this.videoPlayer.currentTime / this.videoPlayer.duration) * 100}%`;
            }
            
            /**
             * Show seek indicator (+10s/-10s)
             * @param {number} seconds - Seconds to seek
             */
            showSeekIndicator(seconds) {
                this.seekIndicator.textContent = `${seconds > 0 ? '+' : ''}${seconds}s`;
                this.seekIndicator.classList.add('show');
                setTimeout(() => this.seekIndicator.classList.remove('show'), 1000);
            }
            
            /**
             * Toggle play/pause state
             */
            togglePlayPause() {
                if (!this.isLandscape) return;
                if (this.videoPlayer.paused) {
                    this.videoPlayer.play().then(() => {
                        this.playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                        this.showControls();
                        this.hideCenterPlayButton();
                    }).catch(e => {
                        this.showAlert("Playback Error", "Please interact with the page first to play video.");
                    });
                } else {
                    this.videoPlayer.pause();
                    this.playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                    this.showControls();
                }
            }
            
            /**
             * Toggle mute state
             */
            toggleMute() {
                this.videoPlayer.muted = !this.videoPlayer.muted;
                this.updateMuteButton();
            }
            
            /**
             * Update mute button icon based on current state
             */
            updateMuteButton() {
                if (this.videoPlayer.muted || this.videoPlayer.volume == 0) {
                    this.muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    this.volumeSlider.value = 0;
                    this.volumeValue.textContent = '0%';
                } else {
                    this.muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    this.volumeSlider.value = this.videoPlayer.volume;
                    this.volumeValue.textContent = `${Math.round(this.videoPlayer.volume * 100)}%`;
                }
            }
            
            /**
             * Seek video by specified seconds
             * @param {number} seconds - Seconds to seek (positive or negative)
             */
            seek(seconds) {
                this.videoPlayer.currentTime += seconds;
                this.showSeekIndicator(seconds);
            }
            
            /**
             * Toggle fullscreen mode
             */
            toggleFullscreen() {
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                } else {
                    document.documentElement.requestFullscreen();
                }
            }
            
            /**
             * Handle pinch-to-zoom gesture
             * @param {TouchEvent} e - Touch event
             */
            handlePinch(e) {
                e.preventDefault();
                if (e.touches.length === 2) {
                    const touch1 = e.touches[0];
                    const touch2 = e.touches[1];
                    const currentDistance = Math.hypot(
                        touch2.clientX - touch1.clientX,
                        touch2.clientY - touch1.clientY
                    );
                    
                    if (this.initialDistance === null) {
                        this.initialDistance = currentDistance;
                    } else {
                        const scale = currentDistance / this.initialDistance;
                        this.updateZoom(this.currentZoom * scale);
                        this.initialDistance = currentDistance;
                    }
                }
            }
            
            /**
             * Reset pinch-to-zoom tracking
             */
            resetPinch() {
                this.initialDistance = null;
            }
            
            /**
             * Update zoom level and video transform
             * @param {number} scale - New zoom scale
             */
            updateZoom(scale) {
                this.currentZoom = Math.max(1, Math.min(3, scale));
                this.videoPlayer.style.transform = `scale(${this.currentZoom})`;
                this.videoPlayer.style.transformOrigin = 'center center';
                this.zoomLevel.textContent = `${Math.round(this.currentZoom * 100)}%`;
                this.zoomLevel.classList.add('show');
                setTimeout(() => this.zoomLevel.classList.remove('show'), 1000);
            }
            
            /**
             * Check if video URL is valid
             * @param {string} url - Video URL to check
             * @returns {boolean} - True if valid, false otherwise
             */
            checkVideoUrl(url) {
                if (!url) {
                    this.showAlert("Invalid URL", "No video URL provided in query parameter 'q'");
                    return false;
                }
                
                const videoExtensions = ['.mp4', '.webm', '.ogg', '.mov', '.m3u8', '.mkv'];
                const isValid = videoExtensions.some(ext => url.includes(ext)) || 
                              url.includes('youtube.com') || 
                              url.includes('youtu.be');
                
                if (!isValid) {
                    this.showAlert("Invalid Video", "The provided URL doesn't seem to be a valid video file.");
                    return false;
                }
                
                return true;
            }
            
            /**
             * Show custom alert dialog
             * @param {string} title - Alert title
             * @param {string} message - Alert message
             */
            showAlert(title, message) {
                this.alertHeader.innerHTML = `<span>${title}</span>`;
                this.alertContent.textContent = message;
                this.customAlert.classList.add('show');
            }
            
            /**
             * Hide custom alert dialog
             */
            hideAlert() {
                this.customAlert.classList.remove('show');
            }
            
            /**
             * Show center play button (when autoplay fails)
             */
            showCenterPlayButton() {
                this.playCenterBtn.classList.add('visible');
            }
            
            /**
             * Hide center play button
             */
            hideCenterPlayButton() {
                this.playCenterBtn.classList.remove('visible');
            }
            
            /**
             * Show video thumbnail overlay
             */
            showThumbnail() {
                this.thumbnailOverlay.style.display = 'flex';
            }
            
            /**
             * Hide video thumbnail overlay
             */
            hideThumbnail() {
                this.thumbnailOverlay.style.display = 'none';
            }
            
            /**
             * Show loading spinner if
             */
            showLoadingSpinner() {
                this.loadingSpinner.style.display = 'block';
            }
            
            /**
             * Hide loading if
             */
            hideLoadingSpinner() {
                this.loadingSpinner.style.display = 'none';
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            const player = new VideoPlayer();
            
            window.player = player;
        });
    </script>
</body>
</html>
